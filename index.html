<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>H7 Alliance Boss Timer</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  background: #0b0f14;
  color: #e6edf3;
  font-family: "Segoe UI", Arial, sans-serif;
}

header {
  padding: 16px;
  background: linear-gradient(180deg,#10151c,#0b0f14);
  border-bottom: 1px solid #1f2937;
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
}

h1 {
  margin: 0;
  font-size: 18px;
}

button {
  background: #2563eb;
  border: none;
  color: white;
  padding: 6px 12px;
  border-radius: 6px;
  cursor: pointer;
  font-weight: 600;
}

button:hover {
  opacity: 0.9;
}

table {
  width: 100%;
  border-collapse: collapse;
}

th, td {
  padding: 10px;
  border-bottom: 1px solid #1f2937;
  font-size: 13px;
  text-align: left;
}

th {
  color: #8fb3d9;
}

.boss-cell {
  display: flex;
  align-items: center;
  gap: 10px;
}

.boss-img {
  width: 40px;
  height: 40px;
  border-radius: 6px;
  border: 1px solid #2a3a4a;
  object-fit: cover;
  background: #000;
}

.spawned {
  background: #1f8f3a;
  color: white;
  padding: 4px 10px;
  border-radius: 6px;
  font-weight: 600;
  text-align: center;
}

.countdown {
  background: #9b1c1c;
  color: white;
  padding: 4px 10px;
  border-radius: 6px;
  font-weight: 600;
  text-align: center;
}

@media (max-width: 600px) {
  th:nth-child(1), td:nth-child(1),
  th:nth-child(3), td:nth-child(3) {
    display: none;
  }
}
</style>
</head>

<body>

<header>
  <h1>H7 ALLIANCE â€“ BOSS TIMER (Local Time)</h1>
  <button onclick="adminLogin()">Admin Login</button>
</header>

<table>
<thead>
<tr>
  <th>LV</th>
  <th>BOSS</th>
  <th>DAY</th>
  <th>TIME</th>
  <th>STATUS</th>
  <th>ACTION</th>
</tr>
</thead>
<tbody id="bossTable"></tbody>
</table>

<script>
const ADMIN_USER = "legendweapon";
const ADMIN_PASS = "legendweapon";

let isAdmin = localStorage.getItem("isAdmin") === "1";

const bosses = [
 {lv:100,name:"Tumier",img:"tumier.png",day:0,time:"21:00"}
];

const table = document.getElementById("bossTable");

function adminLogin() {
  if (isAdmin) {
    localStorage.removeItem("isAdmin");
    isAdmin = false;
    alert("Logged out.");
    update();
    return;
  }

  const u = prompt("Admin Username:");
  const p = prompt("Admin Password:");
  if (u === ADMIN_USER && p === ADMIN_PASS) {
    localStorage.setItem("isAdmin", "1");
    isAdmin = true;
    alert("Admin access granted.");
    update();
  } else {
    alert("Invalid credentials.");
  }
}

function getNextSpawn(day, time, i) {
  const reset = localStorage.getItem("reset_" + i);
  if (reset) {
    const d = new Date(parseInt(reset));
    d.setDate(d.getDate() + 7);
    return d;
  }

  const now = new Date();
  const [h, m] = time.split(":");
  let d = new Date(now);
  d.setHours(h, m, 0, 0);
  d.setDate(d.getDate() + ((7 + day - d.getDay()) % 7));
  if (d < now) d.setDate(d.getDate() + 7);
  return d;
}

function resetBoss(i) {
  if (!isAdmin) return alert("Admin only.");
  localStorage.removeItem("spawned_" + i);
  localStorage.setItem("reset_" + i, Date.now());
  update();
}

function update() {
  table.innerHTML = "";
  bosses.forEach((b, i) => {
    const spawn = getNextSpawn(b.day, b.time, i);
    const diff = spawn - new Date();

    if (diff <= 0 && !localStorage.getItem("spawned_" + i)) {
      localStorage.setItem("spawned_" + i, "1");
    }

    const spawned = localStorage.getItem("spawned_" + i) === "1";

    const status = spawned
      ? `<div class="spawned">SPAWNED</div>`
      : `<div class="countdown">
          ${Math.floor(diff/3600000)}h ${Math.floor(diff/60000)%60}m
        </div>`;

    table.innerHTML += `
<tr>
<td>${b.lv}</td>
<td class="boss-cell">
  <img src="images/${b.img}" class="boss-img">
  ${b.name}
</td>
<td>${["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][b.day]}</td>
<td>${b.time}</td>
<td>${status}</td>
<td>
  ${isAdmin ? `<button onclick="resetBoss(${i})">Reset</button>` : "-"}
</td>
</tr>`;
  });
}

setInterval(update, 1000);
update();
</script>

</body>
</html>
