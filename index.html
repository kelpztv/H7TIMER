<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>H7 Alliance Boss Timer</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  background: #3b0a0a; /* dark red */
  color: #000;
  font-family: Arial, sans-serif;
}

header {
  padding: 14px;
  background: #3b0a0a;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

h1 {
  font-size: 16px;
  margin: 0;
  color: #fff;
}

button {
  background: #fff;
  border: none;
  color: #000;
  padding: 6px 10px;
  border-radius: 6px;
  cursor: pointer;
  font-weight: bold;
}

table {
  width: 100%;
  border-collapse: collapse;
  font-size: 13px;
  background: #fff;
}

th, td {
  padding: 10px;
  border-bottom: 1px solid #ddd;
}

th {
  background: #f3f3f3;
}

.boss-cell {
  display: flex;
  align-items: center;
  gap: 8px;
}

.boss-img {
  width: 36px;
  height: 36px;
  border-radius: 6px;
  object-fit: cover;
}

.spawned {
  background: #16a34a;
  color: #fff;
  padding: 4px 8px;
  border-radius: 6px;
  font-weight: bold;
  text-align: center;
}

.countdown {
  background: #991b1b;
  color: #fff;
  padding: 4px 8px;
  border-radius: 6px;
  font-weight: bold;
  text-align: center;
}

@media(max-width:600px){
  th:nth-child(1),td:nth-child(1),
  th:nth-child(3),td:nth-child(3){
    display:none;
  }
}
</style>
</head>

<body>

<header>
  <h1>H7 ALLIANCE – BOSS SPAWN TIMER</h1>
  <button onclick="adminLogin()">Admin</button>
</header>

<table>
<thead>
<tr>
  <th>LV</th>
  <th>BOSS</th>
  <th>DAY</th>
  <th>TIME</th>
  <th>STATUS</th>
  <th>ACTION</th>
</tr>
</thead>
<tbody id="bossTable"></tbody>
</table>

<script>
/* ===== ADMIN ===== */
const ADMIN_USER = "legendweapon";
const ADMIN_PASS = "legendweapon";
let isAdmin = localStorage.getItem("admin") === "1";

/* ===== TIMEZONE ===== */
const PH_OFFSET = 8 * 60; // UTC+8

function nowPH() {
  const now = new Date();
  const utc = now.getTime() + now.getTimezoneOffset() * 60000;
  return new Date(utc + PH_OFFSET * 60000);
}

/* ===== BOSSES ===== */
const bosses = [
  { lv:60, name:"Venatus", img:"venatus.png", interval:10 },
  { lv:65, name:"Viorent", img:"viorent.png", interval:10 },
  { lv:70, name:"Ego", img:"ego.png", interval:21 },

  { lv:75, name:"Clemantis", img:"clemantis.png",
    schedule:[{d:1,t:"13:30"},{d:4,t:"21:00"}] },

  { lv:75, name:"Livera", img:"livera.png", interval:24 },
  { lv:80, name:"Araneo", img:"araneo.png", interval:24 },
  { lv:80, name:"Undomiel", img:"undomiel.png", interval:24 },

  { lv:82, name:"Saphirus", img:"saphirus.png",
    schedule:[{d:0,t:"19:00"},{d:2,t:"13:30"}] },

  { lv:85, name:"Lady Dalia", img:"ladydalia.png", interval:18 },
  { lv:85, name:"General Aquleus", img:"generalaquelus.png", interval:29 },
  { lv:86, name:"Thymele", img:"thymele.png",
    schedule:[{d:1,t:"21:00"},{d:3,t:"13:30"}] },

  { lv:88, name:"Amentis", img:"amentis.png", interval:29 },
  { lv:88, name:"Baron Braudmore", img:"baronbraudmore.png", interval:32 },
  { lv:90, name:"Milavy", img:"milavy.png", schedule:[{d:6,t:"17:00"}] },

  { lv:92, name:"Wannitas", img:"wannitas.png", interval:48 },
  { lv:93, name:"Metus", img:"metus.png", interval:48 },
  { lv:94, name:"Duplican", img:"duplican.png", interval:48 },

  { lv:95, name:"Shulliar", img:"shulliar.png", interval:35 },
  { lv:96, name:"Ringor", img:"ringor.png", schedule:[{d:6,t:"19:00"}] },
  { lv:97, name:"Roderick", img:"roderick.png", schedule:[{d:5,t:"21:00"}] },

  { lv:98, name:"Gareth", img:"gareth.png", interval:32 },
  { lv:98, name:"Titore", img:"titore.png", interval:37 },
  { lv:99, name:"Larba", img:"larba.png", interval:35 },

  { lv:100, name:"Catena", img:"catena.png", interval:35 },
  { lv:100, name:"Auraq", img:"auraq.png",
    schedule:[{d:5,t:"00:00"},{d:3,t:"23:00"}] },

  { lv:100, name:"Secreta", img:"secreta.png", interval:62 },
  { lv:100, name:"Ordo", img:"ordo.png", interval:62 },
  { lv:100, name:"Asta", img:"asta.png", interval:62 },
  { lv:100, name:"Supore", img:"supore.png", interval:62 },

  { lv:100, name:"Chaiflock", img:"chaiflock.png", schedule:[{d:6,t:"00:00"}] },
  { lv:100, name:"Benji", img:"benji.png", schedule:[{d:0,t:"23:00"}] },

  { lv:100, name:"Icaruthia", img:"icaruthia.png",
    schedule:[{d:2,t:"23:00"},{d:5,t:"23:00"}] },

  { lv:100, name:"Motti", img:"motti.png",
    schedule:[{d:3,t:"21:00"},{d:6,t:"21:00"}] },

  { lv:100, name:"Nevaeh", img:"nevaeh.png", schedule:[{d:0,t:"00:00"}] },

  /* ✅ TUMIER */
  { lv:100, name:"Tumier", img:"tumier.png",
    schedule:[{d:0,t:"21:00"}] }
];

/* ===== ADMIN LOGIN ===== */
function adminLogin(){
  if(isAdmin){
    localStorage.removeItem("admin");
    isAdmin=false;
    alert("Logged out");
    render();
    return;
  }
  const u=prompt("Username");
  const p=prompt("Password");
  if(u===ADMIN_USER && p===ADMIN_PASS){
    localStorage.setItem("admin","1");
    isAdmin=true;
    alert("Admin enabled");
    render();
  }
}

/* ===== NEXT SPAWN ===== */
function nextSpawn(b,i){
  const saved = localStorage.getItem("next_"+i);
  if(saved) return new Date(saved);

  const base = nowPH();

  if(b.interval){
    return new Date(base.getTime() + b.interval*3600000);
  }

  let soonest = null;
  b.schedule.forEach(s=>{
    const d = new Date(base);
    const [h,m]=s.t.split(":");
    d.setHours(h,m,0,0);
    d.setDate(d.getDate()+((7+s.d-d.getDay())%7));
    if(d<=base) d.setDate(d.getDate()+7);
    if(!soonest || d<soonest) soonest=d;
  });
  return soonest;
}

/* ===== RESET ===== */
function resetBoss(i){
  if(!isAdmin) return alert("Admin only");
  const n = nextSpawn(bosses[i],i);
  localStorage.setItem("next_"+i,n.toISOString());
  render();
}

/* ===== RENDER ===== */
const table=document.getElementById("bossTable");

function render(){
  table.innerHTML="";
  bosses.forEach((b,i)=>{
    const n = nextSpawn(b,i);
    const diff = n - nowPH();

    const status = diff<=0
      ? `<div class="spawned">SPAWNED</div>`
      : `<div class="countdown">${Math.floor(diff/3600000)}h ${Math.floor(diff/60000)%60}m</div>`;

    table.innerHTML+=`
<tr>
<td>${b.lv}</td>
<td class="boss-cell"><img class="boss-img" src="images/${b.img}">${b.name}</td>
<td>-</td>
<td>-</td>
<td>${status}</td>
<td>${isAdmin?`<button onclick="resetBoss(${i})">Reset</button>`:"-"}</td>
</tr>`;
  });
}

setInterval(render,1000);
render();
</script>

</body>
</html>
