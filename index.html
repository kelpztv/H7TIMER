<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>H7 Alliance Boss Timer</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  background: #0b0f14;
  color: #e6edf3;
  font-family: Arial, sans-serif;
}

header {
  padding: 14px;
  background: #10151c;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

h1 {
  font-size: 16px;
  margin: 0;
}

button {
  background: #2563eb;
  border: none;
  color: #fff;
  padding: 6px 10px;
  border-radius: 6px;
  cursor: pointer;
}

table {
  width: 100%;
  border-collapse: collapse;
  font-size: 13px;
}

th, td {
  padding: 10px;
  border-bottom: 1px solid #1f2937;
}

th {
  color: #93c5fd;
}

.boss-cell {
  display: flex;
  align-items: center;
  gap: 8px;
}

.boss-img {
  width: 36px;
  height: 36px;
  border-radius: 6px;
}

.spawned {
  background: #16a34a;
  padding: 4px 8px;
  border-radius: 6px;
  font-weight: bold;
  text-align: center;
}

.countdown {
  background: #991b1b;
  padding: 4px 8px;
  border-radius: 6px;
  font-weight: bold;
  text-align: center;
}

@media(max-width:600px){
  th:nth-child(1),td:nth-child(1),
  th:nth-child(3),td:nth-child(3){
    display:none;
  }
}
</style>
</head>

<body>

<header>
  <h1>H7 ALLIANCE â€“ BOSS SPAWN TIMER (LOCAL TIME)</h1>
  <button onclick="adminLogin()">Admin Login</button>
</header>

<table>
<thead>
<tr>
  <th>LV</th>
  <th>BOSS</th>
  <th>DAY</th>
  <th>TIME</th>
  <th>STATUS</th>
  <th>ACTION</th>
</tr>
</thead>
<tbody id="bossTable"></tbody>
</table>

<script>
/* ===== ADMIN ===== */
const ADMIN_USER = "legendweapon";
const ADMIN_PASS = "legendweapon";
let isAdmin = localStorage.getItem("admin") === "1";

/* ===== BOSSES ===== */
const bosses = [
 {lv:60,name:"Venatus",img:"venatus.png",day:1,time:"09:49"},
 {lv:65,name:"Viorent",img:"viorent.png",day:1,time:"09:41"},
 {lv:70,name:"Ego",img:"ego.png",day:1,time:"20:41"},
 {lv:75,name:"Clemantis",img:"clemantis.png",day:2,time:"23:41"},
 {lv:75,name:"Livera",img:"livera.png",day:2,time:"23:41"},
 {lv:80,name:"Araneo",img:"araneo.png",day:2,time:"23:41"},
 {lv:80,name:"Undomiel",img:"undomiel.png",day:2,time:"23:41"},
 {lv:82,name:"Saphirus",img:"saphirus.png",day:2,time:"23:41"},
 {lv:84,name:"Neutro",img:"neutro.png",day:1,time:"17:41"},
 {lv:85,name:"Lady Dalia",img:"ladydalia.png",day:1,time:"17:41"},
 {lv:85,name:"General Aquleus",img:"generalaquelus.png",day:2,time:"04:41"},
 {lv:86,name:"Thymele",img:"thymele.png",day:2,time:"04:41"},
 {lv:88,name:"Amentis",img:"amentis.png",day:2,time:"04:41"},
 {lv:100,name:"Tumier",img:"tumier.png",day:0,time:"21:00"}
];

const table = document.getElementById("bossTable");

/* ===== ADMIN LOGIN ===== */
function adminLogin(){
  if(isAdmin){
    localStorage.removeItem("admin");
    isAdmin=false;
    alert("Logged out");
    render();
    return;
  }
  const u=prompt("Username");
  const p=prompt("Password");
  if(u===ADMIN_USER && p===ADMIN_PASS){
    localStorage.setItem("admin","1");
    isAdmin=true;
    alert("Admin enabled");
    render();
  } else alert("Wrong login");
}

/* ===== FORCE ALL SPAWNED INIT ===== */
bosses.forEach((_,i)=>{
  if(!localStorage.getItem("spawned_"+i)){
    localStorage.setItem("spawned_"+i,"1");
  }
});

/* ===== RESET ===== */
function resetBoss(i){
  if(!isAdmin) return alert("Admin only");
  localStorage.removeItem("spawned_"+i);
  localStorage.setItem("reset_"+i,Date.now());
  render();
}

/* ===== NEXT SPAWN ===== */
function nextSpawn(b,i){
  const reset=localStorage.getItem("reset_"+i);
  if(reset){
    const d=new Date(parseInt(reset));
    d.setDate(d.getDate()+7);
    return d;
  }
  const now=new Date();
  const [h,m]=b.time.split(":");
  let d=new Date(now);
  d.setHours(h,m,0,0);
  d.setDate(d.getDate()+((7+b.day-d.getDay())%7));
  if(d<now) d.setDate(d.getDate()+7);
  return d;
}

/* ===== RENDER ===== */
function render(){
  table.innerHTML="";
  bosses.forEach((b,i)=>{
    const spawn=nextSpawn(b,i);
    const diff=spawn-new Date();
    const spawned=localStorage.getItem("spawned_"+i)==="1";

    const status=spawned
      ? `<div class="spawned">SPAWNED</div>`
      : `<div class="countdown">${Math.floor(diff/3600000)}h ${Math.floor(diff/60000)%60}m</div>`;

    table.innerHTML+=`
<tr>
<td>${b.lv}</td>
<td class="boss-cell"><img class="boss-img" src="images/${b.img}">${b.name}</td>
<td>${["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][b.day]}</td>
<td>${b.time}</td>
<td>${status}</td>
<td>${isAdmin?`<button onclick="resetBoss(${i})">Reset</button>`:"-"}</td>
</tr>`;
  });
}

setInterval(render,1000);
render();
</script>

</body>
</html>
